<app-popup [back]="true" (emitActionData)="onEmitDelete()"></app-popup>
<div class="container">
    <div class="container-select">
        <div class="container-reset" (click)="onClickReset()">
            <img [src]="srcReset">
        </div>
        <div class="select" #inputSelect (click)="onClickSelection()"
            [ngClass]="{'border-radius-bottom' : displaySelect, 'border-radius-global' : !displaySelect}">
            <p> {{ optionSelected.name }} </p>
            <img [src]="srcArrow" class="arrow">
            @if(displaySelect) {
            <div class="container-options">
                @for(option of options; track option.id) {
                <div class="container-option" (click)="onClickOption(option, $event)">
                    <p> {{ option.name }} </p>
                </div>
                }
            </div>
            }
        </div>
    </div>

    <div class="container-user-list">
        @for(user of userList; track user.id; let idx = $index) {
        <div class="container-user" [ngClass]="{'back-dark' : idx % 2 === 0, 'back-clear' : idx % 2 !== 0}">
            <img [src]="user.profilPhoto" (error)="errorPpUser(user.id)" loading="lazy">
            <p class="text"> {{ user.pseudo | titlecase }} {{ user.lastName | uppercase }} -- {{ user.firstName |
                titlecase }} </p>
            <div class="container-role"
                [ngClass]="{'back-yellow' : user.role === RoleModel.ADMIN, 'back-green' : user.role === RoleModel.USER, 'back-blue' : user.role === RoleModel.FAMILY, 'back-red' : user.role === RoleModel.SUSPENDED, 'back-grey' : user.role === RoleModel.NOT_ACTIVATE}">
                <div class="point"
                    [ngClass]="{'point-yellow' : user.role === RoleModel.ADMIN, 'point-green' : user.role === RoleModel.USER, 'point-blue' : user.role === RoleModel.FAMILY, 'point-red' : user.role === RoleModel.SUSPENDED, 'point-grey' : user.role === RoleModel.NOT_ACTIVATE}">
                </div>
                <p> {{ user.role}} </p>
            </div>
            <div class="container-bt">
                <p (click)="displayDetailByUser(idx)">DÃ©tails</p>
                <p (click)="displayActionByUser(idx)">Action</p>
                <p (click)="onClickDelete(user.id)">Supprimer</p>
            </div>
            @if (actionList[idx]) {
            <app-action-user (emitActionClick)="onClickAction(idx, $event)" (emitOutClick)="hiddenActionByIndex(idx)"
                [user]="user" [back]="idx % 2 === 0 ? 'back-dark' : 'back-clear'"></app-action-user>
            }
        </div>
        @if(detailList[idx]) {
        <app-detail-user class="container-detail-user" [user]="user"
            [back]="idx % 2 === 0 ? 'back-dark' : 'back-clear'"></app-detail-user>
        }
        }
    </div>
</div>